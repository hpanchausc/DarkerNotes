<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Darker Notes</title>
		<!-- <link rel="stylesheet" href="css/style.css"> -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Fira+Sans|Cousine" rel="stylesheet">

		<!-- CDNs -->
		<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/gh/quirkey/sammy/lib/min/sammy-latest.min.js"></script>
		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">

		<!-- Rendering -->
		<script type="text/javascript" src="https://rawgit.com/showdownjs/showdown/develop/dist/showdown.min.js"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>

	    <!-- Highlightjs for syntax highlighting (code blocks) -->
	    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>
		<script>
			//hljs.initHighlightingOnLoad();
		</script>

		<!-- Our CSS -->
		<link rel="stylesheet" href="./css/styles.css">
		<link rel="stylesheet" href="./css/sidebar.css">
		<link rel="stylesheet" href="./css/textbox.css" />
		<link rel="stylesheet" href="./css/preview.css" />
		<link rel="stylesheet" href="./css/printable.css" />
		<link rel="stylesheet" href="./css/helpTable.css" />
		<link rel="stylesheet" href="./css/popover.css" />

	</head>
	<body>
		<div id="outercontainer">

			<!-- Navbar -->
			<nav id="navbar" class="navbar navbar-expand-lg navbar-dark bg-dark">
				<div id="sidebar-button-wrapper" class="nav-item nav-link d-none">
					<button type="button" id="sidebarCollapse" class="btn btn-light collapsed">
		                <span></span>
		                <span></span>
		                <span></span>
		            </button>
				</div>
				<div class="nav-item nav-link" data-toggle="tooltip" data-placement="bottom" title="Click here for help">
					<button id="help-button" role="button" data-toggle="modal" data-target="#help-modal" class="btn btn-dark" data-toggle="tooltip" data-placement="bottom" title="Help">
						<i class="fas fa-question fa-2x"></i>
					</button>
				</div>
				<div class="nav-item nav-link" data-toggle="tooltip" data-placement="bottom" title="Preview document">
					<span id="preview-popover" class="d-inline-block" data-toggle="popover" data-placement="right" data-content="❌ write some text first!">
						<button id="preview-button" role="button" class="btn btn-dark disabled" disabled="true" data-toggle="modal" data-target="#preview-modal" data-toggle="tooltip" data-placement="bottom" title="Preview">
							<i class="far fa-eye fa-inverse fa-2x"></i>
						</button>
					</span>
				</div>

				<div class="mx-auto">
					<h1 id="title">Darker Notes</h1>
				</div>
				<!-- Delete button -->
				<div class="nav-item nav-link d-none" data-toggle="modal" data-target="#delete-modal" id="delete-button" data-placement="bottom" title="Delete File">
					<button type="button" class="btn btn-dark">
						<i class="fas fa-trash-alt fa-2x"></i>
					</button>
				</div>
				<!-- Notification button -->
				<div id="notification-button-wrapper" class="nav-item nav-link d-none" data-toggle="tooltip" data-placement="left" title="">
					<span id="new-notification-popup" class="d-inline-block" tabindex="0" data-toggle="tooltip" data-original-title="">
						<button id="notification-button" type="button" class="btn btn-dark d-none" data-toggle="popover" data-container="#notification-button-wrapper" data-placement="bottom">
							<i class="fas fa-bell fa-2x"></i>
						</button>
					</span>
					<!-- Notification content -->
					<div id="notification-content" class="d-none"></div>
				</div>
				<form class="form-inline">
					<!-- Share Button, at first hidden. -->
					<button class="mx-3 btn btn-outline-warning d-none" id="share-button" type="button" data-toggle="modal" data-target="#share-modal">share</button>
					<!-- Sign in Button, at first displayed -->
					<button class="mx-3 btn btn-outline-warning" id="signin-button" type="button" data-toggle="modal" data-target="#signin-modal">sign in</button>
					<!-- Sign out Button, at first hidden . Add d-none to class list to hide-->
					<button class="mx-auto btn btn-outline-warning d-none" id="signout-button" type="button" data-toggle="modal" data-target="#signout-modal">sign out</button>

				</form>
			</nav>
			


			<!-- Sidebar -->
			<div id="wrapper">
				<div id="sidebar-wrapper">
	            	<ul class="sidebar-nav">
		                <li class="row sidebar-brand">
		                	<div class="col m-auto">
		                    	<h4>File Drawer</h4>
		                	</div>
		                </li>
		                <li class="row">
		                	<div class="col pb-3">
		                    	<button onclick="addFile()" class="mx-auto btn btn-dark"><i class="fas fa-file" style="padding-right:6px;"></i>New File</button>
		               			<button onclick="copyFile()" class="mx-auto btn btn-dark"><i class="fas fa-copy" style="padding-right:6px;"></i>Copy File</button>
		                	</div>
		                </li>
		                <li>
		                    <div id="sidebar-files">
									<!-- Content goes here -->
							</div>
		                </li>
		            </ul>
		        </div>
	        </div>


			<!-- Main Window -->
			<main id="content" class="content container-fluid mx-auto">
				<!-- Filename title -->
				<div id="text-title" class="my-3" contenteditable="true" style="margin-left: 30%; margin-right: 30%;">New File</div>
				<!-- editable HTML text area -->
				<div id="text-area" contentEditable="true"></div>
			</main>





		<!-- Notification Preview Modal -->
		<div class="modal fade dark" id="notification-preview-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content dark shadow">
					<div class="modal-header dark">
						<h5 id="notification-preview-title" class="modal-title"></h5>
						<!-- <button type="button" class="close" data-dismiss="modal"></button> -->
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span class="text-light" aria-hidden="true">&times;</span>
						</button>
					</div>
				  	<div id="notification-preview-file-content" class="modal-body text-center"></div>
					<div class="modal-footer">
						<button id="notification-decline-button" type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-times"></i> Decline</button>
						<button id="notification-accept-button" role="button" class="btn btn-warning" data-dismiss="modal"><i class="fas fa-check"></i> Accept</button>
					</div>
				</div>
			</div>
		</div>


		<!-- Preview Modal -->
		<div class="modal fade dark" id="preview-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg">
				<div id="preview-content" class="modal-content dark shadow">
					<div class="d-print-none modal-header dark">
						<h5 class="modal-title">Preview</h5>
						<!-- <button type="button" class="close" data-dismiss="modal"></button> -->
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span class="text-light" aria-hidden="true">&times;</span>
						</button>
					</div>
				  	<div id="preview-shade" class="modal-body text-center"></div>
					<div class="modal-footer d-print-none">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						<!-- Print button. Shows when preview is on, and hidden when off. Needs JS to open new tab/window -->
						<button id="print-button" role="button" class="btn btn-danger" data-toggle="tootlip" data-placement="bottom" title="print"><i class="fas fa-file-pdf"></i> Print</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Help Modal -->
		<div class="modal fade dark" id="help-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-lg">
				<div class="modal-content dark shadow">
					<div class="modal-header dark">
						<h5 class="modal-title">Help for Darker Notes</h5>
						<!-- <button type="button" class="close" data-dismiss="modal"></button> -->
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span class="text-light" aria-hidden="true">&times;</span>
						</button>
					</div>
				  	<div class="modal-body text-center">
				  		<h2>Markdown Syntax</h2>
				  		<p>Markdown is simple and easy to use! Check out these simple examples below.</p>
				  		<div class="table-wrapper-scroll-y">
				  			<table class="table table-dark table-hover">
					  			<thead class="bg-dark"><tr><th scope="col"><strong>input</strong></th><th scope="col"><strong>output</strong></th></tr>
					  			</thead>
					  			<tbody>
					  				<tr><th><code># h1</code></th><th><h1>h1</h1></th></tr>
				  					<tr><th><code>## h2</code></th><th><h2>h2</h2></th></tr>
				  					<tr><th><code>### h3</code></th><th><h3>h3</h3></th></tr>
					  				<tr><th><code>**bold**</code></th><th><strong>bold</strong></th></tr>
				  					<tr><th><code>*italics*</code></th><th><em>italics</em></th></tr>
				  					<tr><th><code>***bold and italics***</code></th><th><em><strong>bold and italics</strong></em></th></tr>
				  					<tr><th><code>`code`</code></th><th><em><code>code</code></em></th></tr>
				  					<tr><th><code>$$T(n) = 2T(n/2) + n \Rightarrow O(nlogn)$$</code></th><th><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mn>2</mn><mi>T</mi><mo>(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo>)</mo><mo>+</mo><mi>n</mi><mo>⇒</mo><mi>O</mi><mo>(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">T(n) = 2T(n/2) + n \Rightarrow O(nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span></th></tr>
					  			</tbody>
					  		</table>
				  		</div>
				  		<h2>Resources</h2>

						<a href="https://github.com/showdownjs/showdown/wiki/Showdown's-Markdown-syntax" target="_blank">Markdown Syntax</a>
						<br />
						<a href="https://katex.org/docs/supported.html" target="_blank">KaTeX Syntax</a>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Share Modal -->
		<div class="modal fade dark" id="share-modal" tabindex="-1" role="dialog">
			<form>
				<div class="modal-dialog">
					<div class="modal-content dark shadow">
						<div class="modal-header dark">
							<h5 class="modal-title">share</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span class="text-light" aria-hidden="true">&times;</span>
							</button>
						</div>
					  	<div class="modal-body">
							<div class="input-group mb-3">
								<div class="input-group-prepend">
								    <span class="input-group-text" id="basic-addon1">send to: </span>
 								 </div>
								<input autofocus class="form-control" placeholder="example@example.com" type="email" id="shareEmail">
							</div>
							<div id="share-error" class="error my-2 text-center text-danger"></div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
							<!-- TODO the below line will need to call a function/servlet -->
							<button type="button" class="btn btn-secondary" onclick="sendFile()">share</button>
						</div>
					</div>
				</div>
			</form>
		</div>

		<!-- Delete Modal -->
		<div class="modal fade dark" id="delete-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content dark shadow">
					<div class="modal-header dark">
						<h5 class="modal-title">Delete File</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span class="text-light" aria-hidden="true">&times;</span>
						</button>
					</div>
				  	<div class="modal-body text-center">
						<div><i>Are you sure you would like to delete this file? This change is irreversible.</i></div>
						<br/>
						<button class="btn btn-warning" data-dismiss="modal">No</button>
						<button class="btn btn-secondary" data-dismiss="modal">Yes</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Signout Modal -->
		<div class="modal fade dark" id="signout-modal" tabindex="-1" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content dark shadow">
					<div class="modal-header dark">
						<h5 class="modal-title">sign out</h5>
						<!-- <button type="button" class="close" data-dismiss="modal"></button> -->
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span class="text-light" aria-hidden="true">&times;</span>
						</button>
					</div>
				  	<div class="modal-body text-center">
						<div><i>Are you sure you would like to sign out?</i></div>
						<br/>
						<button class="btn btn-warning" data-dismiss="modal">No, keep me signed in</button>
						<button class="btn btn-secondary" data-dismiss="modal" onclick="logout()">Yes, sign me out</button>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
					</div>
				</div>
			</div>
		</div>


		<!-- SignIn Modal -->
		<div id="signin-modal" class="modal fade dark" tabindex="-1" role="dialog" aria-labelledby="signinModalCenterTitle" aria-hidden="true">
			<form>
				<div class="modal-dialog modal-dialog-centered dark" role="document">
					<div class="modal-content dark shadow">
						<div class="modal-header dark">
							<h5 class="modal-title" id="signinModalCenterTitle">sign in</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span class="text-light" aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<div class="input-group mb-3">
								<input autofocus class="form-control" placeholder=" Email" type="email" id="emailIn">
							</div>
							<div class="input-group mb-3">
								<input class="form-control" placeholder=" Password" type="text" onfocus="(this.type='password')" id="passIn">
							</div>
							<div id="signin-error" class="error my-2 text-center text-danger"></div>
							<p class="text-muted"><em>Don't have an account? Click "sign up" below!</em></p>
						</div>
						<div class="modal-footer">
							<button type="button" class="mr-auto btn btn-dark" data-toggle="modal" data-target="#signup-modal" data-dismiss="modal">sign up</button>
							<button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
							<button type="button" class="btn btn-warning" onclick="validateLogin()">submit</button>
						</div>
					</div>
				</div>
			</form>
		</div>

		<!-- SignUp content -->
		<div id="signup-modal" class="modal fade dark" tabindex="-1" role="dialog" aria-labelledby="signinModalCenterTitle" aria-hidden="true">
			<form>
				<div class="modal-dialog modal-dialog-centered dark" role="document">
					<div class="modal-content dark shadow">
						<div class="modal-header dark">
							<h5 class="modal-title" id="signupModalCenterTitle">sign up</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span class="text-light" aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<div class="input-group mb-3">
								<input autofocus class="form-control" placeholder=" Email" type="email" id="emailIn-addUser">
							</div>
							<div class="input-group mb-3">
								<input class="form-control" placeholder=" Password" type="text" onfocus="(this.type='password')" id="passIn-addUser">
							</div>
							<div class="input-group mb-3">
								<input class="form-control" placeholder=" Username" type="text" id="nameIn-addUser">
							</div>
							<div id="signup-error" class="error my-2 text-center text-danger"></div>
							<p class="text-muted"><em>Already have an account? Click "sign in" below!</em></p>
						</div>
						<div class="modal-footer">
							<button type="button" class="mr-auto btn btn-dark" data-toggle="modal" data-target="#signin-modal" data-dismiss="modal">sign in</button>
							<button type="button" class="btn btn-secondary" data-dismiss="modal">close</button>
							<button type="button" class="btn btn-warning" onclick="addUser()">submit</button>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
	

		<!-- Printable -->
		<div id="print-format">

		</div>
		<!-- Our scripts -->
		<script src="./js/session.js"></script>
		<script src="./js/app.js"></script>
		<script src="./js/sidebar.js"></script>
		<script src="./js/render.js"></script>
		
		<!-- <script src="./js/viewChange.js"></script> -->
		<script src="./js/preview.js"></script>
		<script src="./js/socket.js"></script>
		<script src="./js/logout.js"></script>
		<script src="./js/fileManagement.js"></script>
		<script src="./js/focus.js"></script>
		<script src="./js/notification.js"></script>
		<script src="./js/login.js"></script>
	</body>
</html>
